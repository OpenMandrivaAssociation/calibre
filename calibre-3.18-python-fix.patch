diff -up calibre-6.5.0/setup/build.py.3~ calibre-6.5.0/setup/build.py
--- calibre-6.5.0/setup/build.py.3~	2022-09-18 17:11:58.452909480 +0200
+++ calibre-6.5.0/setup/build.py	2022-09-18 17:11:58.469576235 +0200
@@ -10,7 +10,8 @@ from collections import namedtuple
 from setup import Command, islinux, isbsd, isfreebsd, ismacos, ishaiku, SRC, iswindows
 isunix = islinux or ismacos or isbsd or ishaiku
 
-py_lib = os.path.join(sys.prefix, 'libs', 'python%d%d.lib' % sys.version_info[:2])
+from distutils import sysconfig
+py_lib = '-lpython'+sysconfig.get_python_version()
 CompileCommand = namedtuple('CompileCommand', 'cmd src dest')
 LinkCommand = namedtuple('LinkCommand', 'cmd objects dest')
 
